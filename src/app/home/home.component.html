<body>
  <nav>
    <div *ngIf="mostrarNavbar" class="navbar-container">
      <header class="header">
        <a class="logo">Gerenciamento de Usuários</a>

        <div class="navbar">
          <button
            class="criar-usuario-btn"
            routerLink="/template-form"
            (click)="abrirCriarUsuario()"
          >
            Template Driven
          </button>
          <button
            class="criar-usuario-btn"
            routerLink="/reactive-form"
            (click)="abrirCriarUsuario()"
          >
            Reactive
          </button>
          <button class="criar-usuario-btn" routerLink="/login">Logout</button>
        </div>
      </header>
    </div>
  </nav>

  <div class="main-body">
    <div class="custom-table-container">
      <table
        mat-table
        [dataSource]="dataSource"
        matSort
        class="mat-elevation-z8 custom-table"
      >
        <!-- ID Column -->
        <ng-container matColumnDef="id">
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by id"
          >
            ID
          </th>
          <td mat-cell *matCellDef="let element">{{ element.id }}</td>
        </ng-container>

        <!-- Nome Column -->
        <ng-container matColumnDef="nome">
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by nome"
          >
            Nome
          </th>
          <td mat-cell *matCellDef="let element">{{ element.nome }}</td>
        </ng-container>

        <!-- Sobrenome Column -->
        <ng-container matColumnDef="sobrenome">
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by sobrenome"
          >
            Sobrenome
          </th>
          <td mat-cell *matCellDef="let element">{{ element.sobrenome }}</td>
        </ng-container>

        <!-- CPF Column -->
        <ng-container matColumnDef="cpf">
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by cpf"
          >
            CPF
          </th>
          <td mat-cell *matCellDef="let element">{{ element.cpf }}</td>
        </ng-container>

        <!-- CPF Responsável Column -->
        <ng-container matColumnDef="cpfResponsavel">
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by cpfResponsavel"
          >
            CPF Responsável
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.cpfResponsavel }}
          </td>
        </ng-container>

        <!-- Data de nascimento Column -->
        <ng-container matColumnDef="dataDeNascimento">
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by dataDeNascimento"
          >
            Data de Nascimento
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.dataDeNascimento | date }}
          </td>
        </ng-container>

        <!-- Gênero Column -->
        <ng-container matColumnDef="genero">
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by genero"
          >
            Gênero
          </th>
          <td mat-cell *matCellDef="let element">{{ element.genero }}</td>
        </ng-container>

        <!-- Campos Opcionais -->
        <!-- Nome Social Column -->
        <ng-container
          matColumnDef="nomeSocial"
          *ngIf="colunasVisiveis.includes('nomeSocial')"
        >
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by nomeSocial"
          >
            Nome Social
          </th>
          <td mat-cell *matCellDef="let element">{{ element.nomeSocial }}</td>
        </ng-container>

        <!-- Cidade Column -->
        <ng-container
          matColumnDef="cidade"
          *ngIf="colunasVisiveis.includes('cidade')"
        >
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by cidade"
          >
            Cidade
          </th>
          <td mat-cell *matCellDef="let element">{{ element.cidade }}</td>
        </ng-container>

        <!-- Estado Column -->
        <ng-container
          matColumnDef="estado"
          *ngIf="colunasVisiveis.includes('estado')"
        >
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by estado"
          >
            Estado
          </th>
          <td mat-cell *matCellDef="let element">{{ element.estado }}</td>
        </ng-container>

        <!-- CEP Column -->
        <ng-container
          matColumnDef="cep"
          *ngIf="colunasVisiveis.includes('cep')"
        >
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by cep"
          >
            CEP
          </th>
          <td mat-cell *matCellDef="let element">{{ element.cep }}</td>
        </ng-container>

        <!-- Logradouro Column -->
        <ng-container
          matColumnDef="logradouro"
          *ngIf="colunasVisiveis.includes('logradouro')"
        >
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by logradouro"
          >
            Logradouro
          </th>
          <td mat-cell *matCellDef="let element">{{ element.logradouro }}</td>
        </ng-container>

        <ng-container matColumnDef="action">
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by action"
          >
            Editar ou Deletar
          </th>
          <td mat-cell *matCellDef="let element">
            <button
              mat-icon-button
              color="primary"
              (click)="abrirEditarUsuario(element)"
            >
              <mat-icon>edit</mat-icon>
            </button>
            <button
              mat-icon-button
              color="warn"
              (click)="deleteUsuario(element.id)"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="colunasVisiveis"></tr>
        <tr mat-row *matRowDef="let row; columns: colunasVisiveis"></tr>
      </table>
    </div>
  </div>
</body>
